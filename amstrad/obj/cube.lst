ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 1.
Hexadecimal [16-Bits]



                              1 .include "main.h.s"
                              1 .globl cpct_disableFirmware_asm
                              2 .globl cpct_drawSolidBox_asm
                              3 .globl cpct_getScreenPtr_asm
                              4 .globl cpct_waitVSYNC_asm
                              5 .globl cpct_setVideoMode_asm
                              6 .globl cpct_scanKeyboard_asm
                              7 .globl cpct_isKeyPressed_asm
                              8 .globl cpct_setVideoMemoryPage_asm
                              9 .globl _cpct_memset_f64_asm
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 2.
Hexadecimal [16-Bits]



                              2 .include "cube.h.s"
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 3.
Hexadecimal [16-Bits]



                              1 .include "render.h.s"
                              1 
                              2 
                              3 ;;Drawable Entity
                              4 .macro DefineDrawableEntity _name, _x, _y, _w, _h, _col
                              5 _name:
                              6     .db _x, _y
                              7     .db _w, _h
                              8     .db _col
                              9 .endm
                     0001    10 dc_x    = 0     dc_y    = 1
                     0003    11 dc_w    = 2     dc_h    = 3
                     0004    12 dc_col  = 4
                             13 
                             14 .globl ren_clearBackBuffers
                             15 ;;.globl ren_switchBuffers
                             16 .globl render_drawCube
                             17 .globl ren_newScene
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 4.
Hexadecimal [16-Bits]



                              2 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                              3 ;;MACROS
                              4 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                              5 .macro DefineCubeLine1 _name, _x, _y, _w, _h, _col, _hp
                              6 _name:
                              7     DefineDrawableEntity _name'_dw, _x, _y, _w, _h, _col
                              8     .db     _hp     ;; Hitpoints
                              9 .endm
                     0000    10 c_de        = 0
                     0006    11 c_de_size   = 6
                     0006    12 c_hp        = 0 + c_de_size
                             13 ;;.macro DefineCubeLine1Default _name, _suf
                             14 ;;    DefineCubeLine1 _name'_suf, 0, 0, 0, 0, 0xFF, 0
                             15 ;;.endm
                             16 ;;.macro DefineNCubeLine1 _name, _n
                             17 
                             18 ;;    _s = 0
                             19 ;;    .rept _n
                             20 ;;        DefineCubeLine1Default _name, \_s
                             21 
                             22 ;;        _s = _s + 1
                             23 ;;    .endm
                             24 ;;.endm
                             25 
                             26 
                             27 
                             28 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                             29 ;;OBJECTS CREATED WITH MACROS
                             30 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                             31 .globl cube_clear
                             32 .globl cube_draw
                             33 .globl cube_drawAll
                             34 .globl cube_clearAll
                             35 
                             36 
                             37 .globl cubeline10
                             38 .globl cubeline11
                             39 .globl cubeline12
                             40 .globl cubeline13
                             41 .globl cubeline14
                             42 .globl cubeline15
                             43 .globl cubeline16
                             44 .globl cubeline17
                             45 .globl cubeline18
                             46 .globl cubeline19
                             47 .globl cubeline110
                             48 .globl cubeline111
                             49 .globl cubeline112
                             50 .globl cubeline113
                             51 .globl cubeline114
                             52 .globl cubeline115
                             53 .globl cubeline116
                             54 .globl cubeline117
                             55 .globl cubeline118
                             56 .globl cubeline119
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 5.
Hexadecimal [16-Bits]



                              3 
                     0014     4 k_max_cube_line = 20
                     0007     5 k_cube_size = 7
                              6 
   0000                       7 DefineCubeLine1 cubeline10, 0x00, 0x00, 0x04, 0x08, 0x0F, 0x01
   0000                       1 cubeline10:
   0000                       2     DefineDrawableEntity cubeline10_dw, 0x00, 0x00, 0x04, 0x08, 0x0F
   0000                       1 cubeline10_dw:
   0000 00 00                 2     .db 0x00, 0x00
   0002 04 08                 3     .db 0x04, 0x08
   0004 0F                    4     .db 0x0F
   0005 01                    3     .db     0x01     ;; Hitpoints
   0006                       8 DefineCubeLine1 cubeline11, 0x04, 0x00, 0x04, 0x08, 0xFF, 0x01
   0006                       1 cubeline11:
   0006                       2     DefineDrawableEntity cubeline11_dw, 0x04, 0x00, 0x04, 0x08, 0xFF
   0006                       1 cubeline11_dw:
   0006 04 00                 2     .db 0x04, 0x00
   0008 04 08                 3     .db 0x04, 0x08
   000A FF                    4     .db 0xFF
   000B 01                    3     .db     0x01     ;; Hitpoints
   000C                       9 DefineCubeLine1 cubeline12, 0x08, 0x00, 0x04, 0x08, 0x0F, 0x01
   000C                       1 cubeline12:
   000C                       2     DefineDrawableEntity cubeline12_dw, 0x08, 0x00, 0x04, 0x08, 0x0F
   000C                       1 cubeline12_dw:
   000C 08 00                 2     .db 0x08, 0x00
   000E 04 08                 3     .db 0x04, 0x08
   0010 0F                    4     .db 0x0F
   0011 01                    3     .db     0x01     ;; Hitpoints
   0012                      10 DefineCubeLine1 cubeline13, 0x0C, 0x00, 0x04, 0x08, 0xFF, 0x01
   0012                       1 cubeline13:
   0012                       2     DefineDrawableEntity cubeline13_dw, 0x0C, 0x00, 0x04, 0x08, 0xFF
   0012                       1 cubeline13_dw:
   0012 0C 00                 2     .db 0x0C, 0x00
   0014 04 08                 3     .db 0x04, 0x08
   0016 FF                    4     .db 0xFF
   0017 01                    3     .db     0x01     ;; Hitpoints
   0018                      11 DefineCubeLine1 cubeline14, 0x10, 0x00, 0x04, 0x08, 0x0F, 0x01
   0018                       1 cubeline14:
   0018                       2     DefineDrawableEntity cubeline14_dw, 0x10, 0x00, 0x04, 0x08, 0x0F
   0018                       1 cubeline14_dw:
   0018 10 00                 2     .db 0x10, 0x00
   001A 04 08                 3     .db 0x04, 0x08
   001C 0F                    4     .db 0x0F
   001D 01                    3     .db     0x01     ;; Hitpoints
   001E                      12 DefineCubeLine1 cubeline15, 0x14, 0x00, 0x04, 0x08, 0xFF, 0x01
   001E                       1 cubeline15:
   001E                       2     DefineDrawableEntity cubeline15_dw, 0x14, 0x00, 0x04, 0x08, 0xFF
   001E                       1 cubeline15_dw:
   001E 14 00                 2     .db 0x14, 0x00
   0020 04 08                 3     .db 0x04, 0x08
   0022 FF                    4     .db 0xFF
   0023 01                    3     .db     0x01     ;; Hitpoints
   0024                      13 DefineCubeLine1 cubeline16, 0x18, 0x00, 0x04, 0x08, 0x0F, 0x01
   0024                       1 cubeline16:
   0024                       2     DefineDrawableEntity cubeline16_dw, 0x18, 0x00, 0x04, 0x08, 0x0F
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 6.
Hexadecimal [16-Bits]



   0024                       1 cubeline16_dw:
   0024 18 00                 2     .db 0x18, 0x00
   0026 04 08                 3     .db 0x04, 0x08
   0028 0F                    4     .db 0x0F
   0029 01                    3     .db     0x01     ;; Hitpoints
   002A                      14 DefineCubeLine1 cubeline17, 0x1C, 0x00, 0x04, 0x08, 0xFF, 0x01
   002A                       1 cubeline17:
   002A                       2     DefineDrawableEntity cubeline17_dw, 0x1C, 0x00, 0x04, 0x08, 0xFF
   002A                       1 cubeline17_dw:
   002A 1C 00                 2     .db 0x1C, 0x00
   002C 04 08                 3     .db 0x04, 0x08
   002E FF                    4     .db 0xFF
   002F 01                    3     .db     0x01     ;; Hitpoints
   0030                      15 DefineCubeLine1 cubeline18, 0x20, 0x00, 0x04, 0x08, 0x0F, 0x01
   0030                       1 cubeline18:
   0030                       2     DefineDrawableEntity cubeline18_dw, 0x20, 0x00, 0x04, 0x08, 0x0F
   0030                       1 cubeline18_dw:
   0030 20 00                 2     .db 0x20, 0x00
   0032 04 08                 3     .db 0x04, 0x08
   0034 0F                    4     .db 0x0F
   0035 01                    3     .db     0x01     ;; Hitpoints
   0036                      16 DefineCubeLine1 cubeline19, 0x24, 0x00, 0x04, 0x08, 0xFF, 0x01
   0036                       1 cubeline19:
   0036                       2     DefineDrawableEntity cubeline19_dw, 0x24, 0x00, 0x04, 0x08, 0xFF
   0036                       1 cubeline19_dw:
   0036 24 00                 2     .db 0x24, 0x00
   0038 04 08                 3     .db 0x04, 0x08
   003A FF                    4     .db 0xFF
   003B 01                    3     .db     0x01     ;; Hitpoints
   003C                      17 DefineCubeLine1 cubeline110, 0x28, 0x00, 0x04, 0x08, 0x0F, 0x01
   003C                       1 cubeline110:
   003C                       2     DefineDrawableEntity cubeline110_dw, 0x28, 0x00, 0x04, 0x08, 0x0F
   003C                       1 cubeline110_dw:
   003C 28 00                 2     .db 0x28, 0x00
   003E 04 08                 3     .db 0x04, 0x08
   0040 0F                    4     .db 0x0F
   0041 01                    3     .db     0x01     ;; Hitpoints
   0042                      18 DefineCubeLine1 cubeline111, 0x2C, 0x00, 0x04, 0x08, 0xFF, 0x01
   0042                       1 cubeline111:
   0042                       2     DefineDrawableEntity cubeline111_dw, 0x2C, 0x00, 0x04, 0x08, 0xFF
   0042                       1 cubeline111_dw:
   0042 2C 00                 2     .db 0x2C, 0x00
   0044 04 08                 3     .db 0x04, 0x08
   0046 FF                    4     .db 0xFF
   0047 01                    3     .db     0x01     ;; Hitpoints
   0048                      19 DefineCubeLine1 cubeline112, 0x30, 0x00, 0x04, 0x08, 0x0F, 0x01
   0048                       1 cubeline112:
   0048                       2     DefineDrawableEntity cubeline112_dw, 0x30, 0x00, 0x04, 0x08, 0x0F
   0048                       1 cubeline112_dw:
   0048 30 00                 2     .db 0x30, 0x00
   004A 04 08                 3     .db 0x04, 0x08
   004C 0F                    4     .db 0x0F
   004D 01                    3     .db     0x01     ;; Hitpoints
   004E                      20 DefineCubeLine1 cubeline113, 0x34, 0x00, 0x04, 0x08, 0xFF, 0x01
   004E                       1 cubeline113:
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 7.
Hexadecimal [16-Bits]



   004E                       2     DefineDrawableEntity cubeline113_dw, 0x34, 0x00, 0x04, 0x08, 0xFF
   004E                       1 cubeline113_dw:
   004E 34 00                 2     .db 0x34, 0x00
   0050 04 08                 3     .db 0x04, 0x08
   0052 FF                    4     .db 0xFF
   0053 01                    3     .db     0x01     ;; Hitpoints
   0054                      21 DefineCubeLine1 cubeline114, 0x38, 0x00, 0x04, 0x08, 0x0F, 0x01
   0054                       1 cubeline114:
   0054                       2     DefineDrawableEntity cubeline114_dw, 0x38, 0x00, 0x04, 0x08, 0x0F
   0054                       1 cubeline114_dw:
   0054 38 00                 2     .db 0x38, 0x00
   0056 04 08                 3     .db 0x04, 0x08
   0058 0F                    4     .db 0x0F
   0059 01                    3     .db     0x01     ;; Hitpoints
   005A                      22 DefineCubeLine1 cubeline115, 0x3C, 0x00, 0x04, 0x08, 0xFF, 0x01
   005A                       1 cubeline115:
   005A                       2     DefineDrawableEntity cubeline115_dw, 0x3C, 0x00, 0x04, 0x08, 0xFF
   005A                       1 cubeline115_dw:
   005A 3C 00                 2     .db 0x3C, 0x00
   005C 04 08                 3     .db 0x04, 0x08
   005E FF                    4     .db 0xFF
   005F 01                    3     .db     0x01     ;; Hitpoints
   0060                      23 DefineCubeLine1 cubeline116, 0x40, 0x00, 0x04, 0x08, 0x0F, 0x01
   0060                       1 cubeline116:
   0060                       2     DefineDrawableEntity cubeline116_dw, 0x40, 0x00, 0x04, 0x08, 0x0F
   0060                       1 cubeline116_dw:
   0060 40 00                 2     .db 0x40, 0x00
   0062 04 08                 3     .db 0x04, 0x08
   0064 0F                    4     .db 0x0F
   0065 01                    3     .db     0x01     ;; Hitpoints
   0066                      24 DefineCubeLine1 cubeline117, 0x44, 0x00, 0x04, 0x08, 0xFF, 0x01
   0066                       1 cubeline117:
   0066                       2     DefineDrawableEntity cubeline117_dw, 0x44, 0x00, 0x04, 0x08, 0xFF
   0066                       1 cubeline117_dw:
   0066 44 00                 2     .db 0x44, 0x00
   0068 04 08                 3     .db 0x04, 0x08
   006A FF                    4     .db 0xFF
   006B 01                    3     .db     0x01     ;; Hitpoints
   006C                      25 DefineCubeLine1 cubeline118, 0x48, 0x00, 0x04, 0x08, 0x0F, 0x01
   006C                       1 cubeline118:
   006C                       2     DefineDrawableEntity cubeline118_dw, 0x48, 0x00, 0x04, 0x08, 0x0F
   006C                       1 cubeline118_dw:
   006C 48 00                 2     .db 0x48, 0x00
   006E 04 08                 3     .db 0x04, 0x08
   0070 0F                    4     .db 0x0F
   0071 01                    3     .db     0x01     ;; Hitpoints
   0072                      26 DefineCubeLine1 cubeline119, 0x4C, 0x00, 0x04, 0x08, 0xFF, 0x01
   0072                       1 cubeline119:
   0072                       2     DefineDrawableEntity cubeline119_dw, 0x4C, 0x00, 0x04, 0x08, 0xFF
   0072                       1 cubeline119_dw:
   0072 4C 00                 2     .db 0x4C, 0x00
   0074 04 08                 3     .db 0x04, 0x08
   0076 FF                    4     .db 0xFF
   0077 01                    3     .db     0x01     ;; Hitpoints
                             27 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 8.
Hexadecimal [16-Bits]



   0078 14                   28 m_num_cube: .db 20
                             29 
   0079                      30 cube_clear:
   0079 DD 21 00 00   [14]   31 ld ix,#cubeline10
   007D CD 96 01      [17]   32 call cube_clearAll
   0080 DD 21 06 00   [14]   33 ld ix,#cubeline11
   0084 CD 96 01      [17]   34 call cube_clearAll
   0087 DD 21 0C 00   [14]   35 ld ix,#cubeline12
   008B CD 96 01      [17]   36 call cube_clearAll
   008E DD 21 12 00   [14]   37 ld ix,#cubeline13
   0092 CD 96 01      [17]   38 call cube_clearAll
   0095 DD 21 18 00   [14]   39 ld ix,#cubeline14
   0099 CD 96 01      [17]   40 call cube_clearAll
   009C DD 21 1E 00   [14]   41 ld ix,#cubeline15
   00A0 CD 96 01      [17]   42 call cube_clearAll
   00A3 DD 21 24 00   [14]   43 ld ix,#cubeline16
   00A7 CD 96 01      [17]   44 call cube_clearAll
   00AA DD 21 2A 00   [14]   45 ld ix,#cubeline17
   00AE CD 96 01      [17]   46 call cube_clearAll
   00B1 DD 21 30 00   [14]   47 ld ix,#cubeline18
   00B5 CD 96 01      [17]   48 call cube_clearAll
   00B8 DD 21 36 00   [14]   49 ld ix,#cubeline19
   00BC CD 96 01      [17]   50 call cube_clearAll
   00BF DD 21 3C 00   [14]   51 ld ix,#cubeline110
   00C3 CD 96 01      [17]   52 call cube_clearAll
   00C6 DD 21 42 00   [14]   53 ld ix,#cubeline111
   00CA CD 96 01      [17]   54 call cube_clearAll
   00CD DD 21 48 00   [14]   55 ld ix,#cubeline112
   00D1 CD 96 01      [17]   56 call cube_clearAll
   00D4 DD 21 4E 00   [14]   57 ld ix,#cubeline113
   00D8 CD 96 01      [17]   58 call cube_clearAll
   00DB DD 21 54 00   [14]   59 ld ix,#cubeline114
   00DF CD 96 01      [17]   60 call cube_clearAll
   00E2 DD 21 5A 00   [14]   61 ld ix,#cubeline115
   00E6 CD 96 01      [17]   62 call cube_clearAll
   00E9 DD 21 60 00   [14]   63 ld ix,#cubeline116
   00ED CD 96 01      [17]   64 call cube_clearAll
   00F0 DD 21 66 00   [14]   65 ld ix,#cubeline117
   00F4 CD 96 01      [17]   66 call cube_clearAll
   00F7 DD 21 6C 00   [14]   67 ld ix,#cubeline118
   00FB CD 96 01      [17]   68 call cube_clearAll
   00FE DD 21 72 00   [14]   69 ld ix,#cubeline119
   0102 CD 96 01      [17]   70 call cube_clearAll
   0105 C9            [10]   71 ret
                             72 
   0106                      73 cube_draw:
   0106 DD 21 00 00   [14]   74 ld ix,#cubeline10
   010A CD 93 01      [17]   75 call cube_drawAll
   010D DD 21 06 00   [14]   76 ld ix,#cubeline11
   0111 CD 93 01      [17]   77 call cube_drawAll
   0114 DD 21 0C 00   [14]   78 ld ix,#cubeline12
   0118 CD 93 01      [17]   79 call cube_drawAll
   011B DD 21 12 00   [14]   80 ld ix,#cubeline13
   011F CD 93 01      [17]   81 call cube_drawAll
   0122 DD 21 18 00   [14]   82 ld ix,#cubeline14
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 9.
Hexadecimal [16-Bits]



   0126 CD 93 01      [17]   83 call cube_drawAll
   0129 DD 21 1E 00   [14]   84 ld ix,#cubeline15
   012D CD 93 01      [17]   85 call cube_drawAll
   0130 DD 21 24 00   [14]   86 ld ix,#cubeline16
   0134 CD 93 01      [17]   87 call cube_drawAll
   0137 DD 21 2A 00   [14]   88 ld ix,#cubeline17
   013B CD 93 01      [17]   89 call cube_drawAll
   013E DD 21 30 00   [14]   90 ld ix,#cubeline18
   0142 CD 93 01      [17]   91 call cube_drawAll
   0145 DD 21 36 00   [14]   92 ld ix,#cubeline19
   0149 CD 93 01      [17]   93 call cube_drawAll
   014C DD 21 3C 00   [14]   94 ld ix,#cubeline110
   0150 CD 93 01      [17]   95 call cube_drawAll
   0153 DD 21 42 00   [14]   96 ld ix,#cubeline111
   0157 CD 93 01      [17]   97 call cube_drawAll
   015A DD 21 48 00   [14]   98 ld ix,#cubeline112
   015E CD 93 01      [17]   99 call cube_drawAll
   0161 DD 21 4E 00   [14]  100 ld ix,#cubeline113
   0165 CD 93 01      [17]  101 call cube_drawAll
   0168 DD 21 54 00   [14]  102 ld ix,#cubeline114
   016C CD 93 01      [17]  103 call cube_drawAll
   016F DD 21 5A 00   [14]  104 ld ix,#cubeline115
   0173 CD 93 01      [17]  105 call cube_drawAll
   0176 DD 21 60 00   [14]  106 ld ix,#cubeline116
   017A CD 93 01      [17]  107 call cube_drawAll
   017D DD 21 66 00   [14]  108 ld ix,#cubeline117
   0181 CD 93 01      [17]  109 call cube_drawAll
   0184 DD 21 6C 00   [14]  110 ld ix,#cubeline118
   0188 CD 93 01      [17]  111 call cube_drawAll
   018B DD 21 72 00   [14]  112 ld ix,#cubeline119
   018F CD 93 01      [17]  113 call cube_drawAll
   0192 C9            [10]  114 ret
                            115 
                            116 
                            117 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            118 ;; DRAW ENTITY
                            119 ;; REGISTERS DETROYED: AF, BC, DE ,HL
                            120 ;; INPUT: IX -> Points to entity
                            121 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   0193                     122 cube_drawAll:
   0193 C3 00 00      [10]  123     jp render_drawCube
                            124    
                            125    
                            126 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            127 ;; BORRA UNA ENTIDAD
                            128 ;; PARA CUADRADOS UNICAMENTE
                            129 ;; REGISTERS DESTROYED: AF, AF', BC, DE, HL
                            130 ;; ENTRADA: IX -> Puntero a entidad
                            131 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   0196                     132 cube_clearAll:
                            133 
   0196 DD 7E 04      [19]  134    ld  a, dc_col(ix)
   0199 08            [ 4]  135    ex af, af'
                            136 
   019A DD 36 04 00   [19]  137    ld  dc_col(ix), #0
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 10.
Hexadecimal [16-Bits]



                            138 
   019E CD 00 00      [17]  139    call render_drawCube
   01A1 08            [ 4]  140    ex af, af'
   01A2 DD 77 04      [19]  141    ld dc_col(ix), a
                            142 
   01A5 C9            [10]  143    ret
