ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 1.
Hexadecimal [16-Bits]



                              1 .include "main.h.s"
                              1 .globl cpct_disableFirmware_asm
                              2 .globl cpct_drawSolidBox_asm
                              3 .globl cpct_getScreenPtr_asm
                              4 .globl cpct_waitVSYNC_asm
                              5 .globl cpct_setVideoMode_asm
                              6 .globl cpct_scanKeyboard_asm
                              7 .globl cpct_isKeyPressed_asm
                              8 .globl cpct_setVideoMemoryPage_asm
                              9 .globl _cpct_memset_f64_asm
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 2.
Hexadecimal [16-Bits]



                              2 .include "cube.h.s"
                              1 
                              2 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                              3 ;;MACROS
                              4 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                              5 .macro DefineCubeLine1 _name, _x, _y, _w, _h, _col, _hp
                              6 _name:
                              7     DefineDrawableEntity _name'_dw, _x, _y, _w, _h, _col
                              8     .db     _hp     ;; Hitpoints
                              9 .endm
                     0000    10 c_de        = 0
                     0006    11 c_de_size   = 6
                     0006    12 c_hp        = 0 + c_de_size
                             13 ;;.macro DefineCubeLine1Default _name, _suf
                             14 ;;    DefineCubeLine1 _name'_suf, 0, 0, 0, 0, 0xFF, 0
                             15 ;;.endm
                             16 ;;.macro DefineNCubeLine1 _name, _n
                             17 
                             18 ;;    _s = 0
                             19 ;;    .rept _n
                             20 ;;        DefineCubeLine1Default _name, \_s
                             21 
                             22 ;;        _s = _s + 1
                             23 ;;    .endm
                             24 ;;.endm
                             25 
                             26 
                             27 
                             28 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                             29 ;;OBJECTS CREATED WITH MACROS
                             30 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                             31 .globl cube_clear
                             32 .globl cube_draw
                             33 .globl cube_drawAll
                             34 .globl cube_clearAll
                             35 .globl destroy_cube
                             36 
                             37 .globl k_max_cube_line	
                             38 
                             39 
                             40 .globl k_max_cube_line	
                             41 
                             42 
                             43 .globl cubeline10
                             44 .globl cubeline11
                             45 .globl cubeline12
                             46 .globl cubeline13
                             47 .globl cubeline14
                             48 .globl cubeline15
                             49 .globl cubeline16
                             50 .globl cubeline17
                             51 .globl cubeline18
                             52 .globl cubeline19
                             53 .globl cubeline110
                             54 .globl cubeline111
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 3.
Hexadecimal [16-Bits]



                             55 .globl cubeline112
                             56 .globl cubeline113
                             57 .globl cubeline114
                             58 .globl cubeline115
                             59 .globl cubeline116
                             60 .globl cubeline117
                             61 .globl cubeline118
                             62 .globl cubeline119
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 4.
Hexadecimal [16-Bits]



                              3 .include "render.h.s"
                              1 
                              2 
                              3 ;;Drawable Entity
                              4 .macro DefineDrawableEntity _name, _x, _y, _w, _h, _col
                              5 _name:
                              6     .db _x, _y
                              7     .db _w, _h
                              8     .db _col
                              9 .endm
                     0001    10 dc_x    = 0     dc_y    = 1
                     0003    11 dc_w    = 2     dc_h    = 3
                     0004    12 dc_col  = 4
                             13 
                             14 .globl ren_clearBackBuffers
                             15 ;;.globl ren_switchBuffers
                             16 .globl render_drawCube
                             17 .globl ren_newScene
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 5.
Hexadecimal [16-Bits]



                              4 
                     0014     5 k_max_cube_line = 20
                     0007     6 k_cube_size = 7
                              7 
   0000                       8 DefineCubeLine1 cubeline10, 0x00, 0x10, 0x04, 0x08, 0x0F, 0x01
   0000                       1 cubeline10:
   0000                       2     DefineDrawableEntity cubeline10_dw, 0x00, 0x10, 0x04, 0x08, 0x0F
   0000                       1 cubeline10_dw:
   0000 00 10                 2     .db 0x00, 0x10
   0002 04 08                 3     .db 0x04, 0x08
   0004 0F                    4     .db 0x0F
   0005 01                    3     .db     0x01     ;; Hitpoints
   0006                       9 DefineCubeLine1 cubeline11, 0x04, 0x10, 0x04, 0x08, 0xFF, 0x01
   0006                       1 cubeline11:
   0006                       2     DefineDrawableEntity cubeline11_dw, 0x04, 0x10, 0x04, 0x08, 0xFF
   0006                       1 cubeline11_dw:
   0006 04 10                 2     .db 0x04, 0x10
   0008 04 08                 3     .db 0x04, 0x08
   000A FF                    4     .db 0xFF
   000B 01                    3     .db     0x01     ;; Hitpoints
   000C                      10 DefineCubeLine1 cubeline12, 0x08, 0x10, 0x04, 0x08, 0x0F, 0x01
   000C                       1 cubeline12:
   000C                       2     DefineDrawableEntity cubeline12_dw, 0x08, 0x10, 0x04, 0x08, 0x0F
   000C                       1 cubeline12_dw:
   000C 08 10                 2     .db 0x08, 0x10
   000E 04 08                 3     .db 0x04, 0x08
   0010 0F                    4     .db 0x0F
   0011 01                    3     .db     0x01     ;; Hitpoints
   0012                      11 DefineCubeLine1 cubeline13, 0x0C, 0x10, 0x04, 0x08, 0xFF, 0x01
   0012                       1 cubeline13:
   0012                       2     DefineDrawableEntity cubeline13_dw, 0x0C, 0x10, 0x04, 0x08, 0xFF
   0012                       1 cubeline13_dw:
   0012 0C 10                 2     .db 0x0C, 0x10
   0014 04 08                 3     .db 0x04, 0x08
   0016 FF                    4     .db 0xFF
   0017 01                    3     .db     0x01     ;; Hitpoints
   0018                      12 DefineCubeLine1 cubeline14, 0x10, 0x10, 0x04, 0x08, 0x0F, 0x01
   0018                       1 cubeline14:
   0018                       2     DefineDrawableEntity cubeline14_dw, 0x10, 0x10, 0x04, 0x08, 0x0F
   0018                       1 cubeline14_dw:
   0018 10 10                 2     .db 0x10, 0x10
   001A 04 08                 3     .db 0x04, 0x08
   001C 0F                    4     .db 0x0F
   001D 01                    3     .db     0x01     ;; Hitpoints
   001E                      13 DefineCubeLine1 cubeline15, 0x14, 0x10, 0x04, 0x08, 0xFF, 0x01
   001E                       1 cubeline15:
   001E                       2     DefineDrawableEntity cubeline15_dw, 0x14, 0x10, 0x04, 0x08, 0xFF
   001E                       1 cubeline15_dw:
   001E 14 10                 2     .db 0x14, 0x10
   0020 04 08                 3     .db 0x04, 0x08
   0022 FF                    4     .db 0xFF
   0023 01                    3     .db     0x01     ;; Hitpoints
   0024                      14 DefineCubeLine1 cubeline16, 0x18, 0x10, 0x04, 0x08, 0x0F, 0x01
   0024                       1 cubeline16:
   0024                       2     DefineDrawableEntity cubeline16_dw, 0x18, 0x10, 0x04, 0x08, 0x0F
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 6.
Hexadecimal [16-Bits]



   0024                       1 cubeline16_dw:
   0024 18 10                 2     .db 0x18, 0x10
   0026 04 08                 3     .db 0x04, 0x08
   0028 0F                    4     .db 0x0F
   0029 01                    3     .db     0x01     ;; Hitpoints
   002A                      15 DefineCubeLine1 cubeline17, 0x1C, 0x10, 0x04, 0x08, 0xFF, 0x01
   002A                       1 cubeline17:
   002A                       2     DefineDrawableEntity cubeline17_dw, 0x1C, 0x10, 0x04, 0x08, 0xFF
   002A                       1 cubeline17_dw:
   002A 1C 10                 2     .db 0x1C, 0x10
   002C 04 08                 3     .db 0x04, 0x08
   002E FF                    4     .db 0xFF
   002F 01                    3     .db     0x01     ;; Hitpoints
   0030                      16 DefineCubeLine1 cubeline18, 0x20, 0x10, 0x04, 0x08, 0x0F, 0x01
   0030                       1 cubeline18:
   0030                       2     DefineDrawableEntity cubeline18_dw, 0x20, 0x10, 0x04, 0x08, 0x0F
   0030                       1 cubeline18_dw:
   0030 20 10                 2     .db 0x20, 0x10
   0032 04 08                 3     .db 0x04, 0x08
   0034 0F                    4     .db 0x0F
   0035 01                    3     .db     0x01     ;; Hitpoints
   0036                      17 DefineCubeLine1 cubeline19, 0x24, 0x10, 0x04, 0x08, 0xFF, 0x01
   0036                       1 cubeline19:
   0036                       2     DefineDrawableEntity cubeline19_dw, 0x24, 0x10, 0x04, 0x08, 0xFF
   0036                       1 cubeline19_dw:
   0036 24 10                 2     .db 0x24, 0x10
   0038 04 08                 3     .db 0x04, 0x08
   003A FF                    4     .db 0xFF
   003B 01                    3     .db     0x01     ;; Hitpoints
   003C                      18 DefineCubeLine1 cubeline110, 0x28, 0x10, 0x04, 0x08, 0x0F, 0x01
   003C                       1 cubeline110:
   003C                       2     DefineDrawableEntity cubeline110_dw, 0x28, 0x10, 0x04, 0x08, 0x0F
   003C                       1 cubeline110_dw:
   003C 28 10                 2     .db 0x28, 0x10
   003E 04 08                 3     .db 0x04, 0x08
   0040 0F                    4     .db 0x0F
   0041 01                    3     .db     0x01     ;; Hitpoints
   0042                      19 DefineCubeLine1 cubeline111, 0x2C, 0x10, 0x04, 0x08, 0xFF, 0x01
   0042                       1 cubeline111:
   0042                       2     DefineDrawableEntity cubeline111_dw, 0x2C, 0x10, 0x04, 0x08, 0xFF
   0042                       1 cubeline111_dw:
   0042 2C 10                 2     .db 0x2C, 0x10
   0044 04 08                 3     .db 0x04, 0x08
   0046 FF                    4     .db 0xFF
   0047 01                    3     .db     0x01     ;; Hitpoints
   0048                      20 DefineCubeLine1 cubeline112, 0x30, 0x10, 0x04, 0x08, 0x0F, 0x01
   0048                       1 cubeline112:
   0048                       2     DefineDrawableEntity cubeline112_dw, 0x30, 0x10, 0x04, 0x08, 0x0F
   0048                       1 cubeline112_dw:
   0048 30 10                 2     .db 0x30, 0x10
   004A 04 08                 3     .db 0x04, 0x08
   004C 0F                    4     .db 0x0F
   004D 01                    3     .db     0x01     ;; Hitpoints
   004E                      21 DefineCubeLine1 cubeline113, 0x34, 0x10, 0x04, 0x08, 0xFF, 0x01
   004E                       1 cubeline113:
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 7.
Hexadecimal [16-Bits]



   004E                       2     DefineDrawableEntity cubeline113_dw, 0x34, 0x10, 0x04, 0x08, 0xFF
   004E                       1 cubeline113_dw:
   004E 34 10                 2     .db 0x34, 0x10
   0050 04 08                 3     .db 0x04, 0x08
   0052 FF                    4     .db 0xFF
   0053 01                    3     .db     0x01     ;; Hitpoints
   0054                      22 DefineCubeLine1 cubeline114, 0x38, 0x10, 0x04, 0x08, 0x0F, 0x01
   0054                       1 cubeline114:
   0054                       2     DefineDrawableEntity cubeline114_dw, 0x38, 0x10, 0x04, 0x08, 0x0F
   0054                       1 cubeline114_dw:
   0054 38 10                 2     .db 0x38, 0x10
   0056 04 08                 3     .db 0x04, 0x08
   0058 0F                    4     .db 0x0F
   0059 01                    3     .db     0x01     ;; Hitpoints
   005A                      23 DefineCubeLine1 cubeline115, 0x3C, 0x10, 0x04, 0x08, 0xFF, 0x01
   005A                       1 cubeline115:
   005A                       2     DefineDrawableEntity cubeline115_dw, 0x3C, 0x10, 0x04, 0x08, 0xFF
   005A                       1 cubeline115_dw:
   005A 3C 10                 2     .db 0x3C, 0x10
   005C 04 08                 3     .db 0x04, 0x08
   005E FF                    4     .db 0xFF
   005F 01                    3     .db     0x01     ;; Hitpoints
   0060                      24 DefineCubeLine1 cubeline116, 0x40, 0x10, 0x04, 0x08, 0x0F, 0x01
   0060                       1 cubeline116:
   0060                       2     DefineDrawableEntity cubeline116_dw, 0x40, 0x10, 0x04, 0x08, 0x0F
   0060                       1 cubeline116_dw:
   0060 40 10                 2     .db 0x40, 0x10
   0062 04 08                 3     .db 0x04, 0x08
   0064 0F                    4     .db 0x0F
   0065 01                    3     .db     0x01     ;; Hitpoints
   0066                      25 DefineCubeLine1 cubeline117, 0x44, 0x10, 0x04, 0x08, 0xFF, 0x01
   0066                       1 cubeline117:
   0066                       2     DefineDrawableEntity cubeline117_dw, 0x44, 0x10, 0x04, 0x08, 0xFF
   0066                       1 cubeline117_dw:
   0066 44 10                 2     .db 0x44, 0x10
   0068 04 08                 3     .db 0x04, 0x08
   006A FF                    4     .db 0xFF
   006B 01                    3     .db     0x01     ;; Hitpoints
   006C                      26 DefineCubeLine1 cubeline118, 0x48, 0x10, 0x04, 0x08, 0x0F, 0x01
   006C                       1 cubeline118:
   006C                       2     DefineDrawableEntity cubeline118_dw, 0x48, 0x10, 0x04, 0x08, 0x0F
   006C                       1 cubeline118_dw:
   006C 48 10                 2     .db 0x48, 0x10
   006E 04 08                 3     .db 0x04, 0x08
   0070 0F                    4     .db 0x0F
   0071 01                    3     .db     0x01     ;; Hitpoints
   0072                      27 DefineCubeLine1 cubeline119, 0x4C, 0x10, 0x04, 0x08, 0xFF, 0x01
   0072                       1 cubeline119:
   0072                       2     DefineDrawableEntity cubeline119_dw, 0x4C, 0x10, 0x04, 0x08, 0xFF
   0072                       1 cubeline119_dw:
   0072 4C 10                 2     .db 0x4C, 0x10
   0074 04 08                 3     .db 0x04, 0x08
   0076 FF                    4     .db 0xFF
   0077 01                    3     .db     0x01     ;; Hitpoints
                             28 
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 8.
Hexadecimal [16-Bits]



   0078 14                   29 m_num_cube: .db 20
                             30 
   0079                      31 cube_clear:
   0079 DD 21 00 00   [14]   32 ld ix,#cubeline10
   007D CD 96 01      [17]   33 call cube_clearAll
   0080 DD 21 06 00   [14]   34 ld ix,#cubeline11
   0084 CD 96 01      [17]   35 call cube_clearAll
   0087 DD 21 0C 00   [14]   36 ld ix,#cubeline12
   008B CD 96 01      [17]   37 call cube_clearAll
   008E DD 21 12 00   [14]   38 ld ix,#cubeline13
   0092 CD 96 01      [17]   39 call cube_clearAll
   0095 DD 21 18 00   [14]   40 ld ix,#cubeline14
   0099 CD 96 01      [17]   41 call cube_clearAll
   009C DD 21 1E 00   [14]   42 ld ix,#cubeline15
   00A0 CD 96 01      [17]   43 call cube_clearAll
   00A3 DD 21 24 00   [14]   44 ld ix,#cubeline16
   00A7 CD 96 01      [17]   45 call cube_clearAll
   00AA DD 21 2A 00   [14]   46 ld ix,#cubeline17
   00AE CD 96 01      [17]   47 call cube_clearAll
   00B1 DD 21 30 00   [14]   48 ld ix,#cubeline18
   00B5 CD 96 01      [17]   49 call cube_clearAll
   00B8 DD 21 36 00   [14]   50 ld ix,#cubeline19
   00BC CD 96 01      [17]   51 call cube_clearAll
   00BF DD 21 3C 00   [14]   52 ld ix,#cubeline110
   00C3 CD 96 01      [17]   53 call cube_clearAll
   00C6 DD 21 42 00   [14]   54 ld ix,#cubeline111
   00CA CD 96 01      [17]   55 call cube_clearAll
   00CD DD 21 48 00   [14]   56 ld ix,#cubeline112
   00D1 CD 96 01      [17]   57 call cube_clearAll
   00D4 DD 21 4E 00   [14]   58 ld ix,#cubeline113
   00D8 CD 96 01      [17]   59 call cube_clearAll
   00DB DD 21 54 00   [14]   60 ld ix,#cubeline114
   00DF CD 96 01      [17]   61 call cube_clearAll
   00E2 DD 21 5A 00   [14]   62 ld ix,#cubeline115
   00E6 CD 96 01      [17]   63 call cube_clearAll
   00E9 DD 21 60 00   [14]   64 ld ix,#cubeline116
   00ED CD 96 01      [17]   65 call cube_clearAll
   00F0 DD 21 66 00   [14]   66 ld ix,#cubeline117
   00F4 CD 96 01      [17]   67 call cube_clearAll
   00F7 DD 21 6C 00   [14]   68 ld ix,#cubeline118
   00FB CD 96 01      [17]   69 call cube_clearAll
   00FE DD 21 72 00   [14]   70 ld ix,#cubeline119
   0102 CD 96 01      [17]   71 call cube_clearAll
   0105 C9            [10]   72 ret
                             73 
   0106                      74 cube_draw:
   0106 DD 21 00 00   [14]   75 ld ix,#cubeline10
   010A CD 93 01      [17]   76 call cube_drawAll
   010D DD 21 06 00   [14]   77 ld ix,#cubeline11
   0111 CD 93 01      [17]   78 call cube_drawAll
   0114 DD 21 0C 00   [14]   79 ld ix,#cubeline12
   0118 CD 93 01      [17]   80 call cube_drawAll
   011B DD 21 12 00   [14]   81 ld ix,#cubeline13
   011F CD 93 01      [17]   82 call cube_drawAll
   0122 DD 21 18 00   [14]   83 ld ix,#cubeline14
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 9.
Hexadecimal [16-Bits]



   0126 CD 93 01      [17]   84 call cube_drawAll
   0129 DD 21 1E 00   [14]   85 ld ix,#cubeline15
   012D CD 93 01      [17]   86 call cube_drawAll
   0130 DD 21 24 00   [14]   87 ld ix,#cubeline16
   0134 CD 93 01      [17]   88 call cube_drawAll
   0137 DD 21 2A 00   [14]   89 ld ix,#cubeline17
   013B CD 93 01      [17]   90 call cube_drawAll
   013E DD 21 30 00   [14]   91 ld ix,#cubeline18
   0142 CD 93 01      [17]   92 call cube_drawAll
   0145 DD 21 36 00   [14]   93 ld ix,#cubeline19
   0149 CD 93 01      [17]   94 call cube_drawAll
   014C DD 21 3C 00   [14]   95 ld ix,#cubeline110
   0150 CD 93 01      [17]   96 call cube_drawAll
   0153 DD 21 42 00   [14]   97 ld ix,#cubeline111
   0157 CD 93 01      [17]   98 call cube_drawAll
   015A DD 21 48 00   [14]   99 ld ix,#cubeline112
   015E CD 93 01      [17]  100 call cube_drawAll
   0161 DD 21 4E 00   [14]  101 ld ix,#cubeline113
   0165 CD 93 01      [17]  102 call cube_drawAll
   0168 DD 21 54 00   [14]  103 ld ix,#cubeline114
   016C CD 93 01      [17]  104 call cube_drawAll
   016F DD 21 5A 00   [14]  105 ld ix,#cubeline115
   0173 CD 93 01      [17]  106 call cube_drawAll
   0176 DD 21 60 00   [14]  107 ld ix,#cubeline116
   017A CD 93 01      [17]  108 call cube_drawAll
   017D DD 21 66 00   [14]  109 ld ix,#cubeline117
   0181 CD 93 01      [17]  110 call cube_drawAll
   0184 DD 21 6C 00   [14]  111 ld ix,#cubeline118
   0188 CD 93 01      [17]  112 call cube_drawAll
   018B DD 21 72 00   [14]  113 ld ix,#cubeline119
   018F CD 93 01      [17]  114 call cube_drawAll
   0192 C9            [10]  115 ret
                            116 
                            117 
                            118 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            119 ;; DRAW ENTITY
                            120 ;; REGISTERS DETROYED: AF, BC, DE ,HL
                            121 ;; INPUT: IX -> Points to entity
                            122 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   0193                     123 cube_drawAll:
   0193 C3 00 00      [10]  124     jp render_drawCube
                            125    
                            126    
                            127 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            128 ;; BORRA UNA ENTIDAD
                            129 ;; PARA CUADRADOS UNICAMENTE
                            130 ;; REGISTERS DESTROYED: AF, AF', BC, DE, HL
                            131 ;; ENTRADA: IX -> Puntero a entidad
                            132 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   0196                     133 cube_clearAll:
                            134 
   0196 DD 7E 04      [19]  135    ld  a, dc_col(ix)
   0199 08            [ 4]  136    ex af, af'
                            137 
   019A DD 36 04 00   [19]  138    ld  dc_col(ix), #0
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 10.
Hexadecimal [16-Bits]



                            139 
   019E CD 00 00      [17]  140    call render_drawCube
   01A1 08            [ 4]  141    ex af, af'
   01A2 DD 77 04      [19]  142    ld dc_col(ix), a
                            143 
   01A5 C9            [10]  144    ret
                            145 
   01A6                     146 destroy_cube:
   01A6 36 FF         [10]  147 ld (hl),#0xFF
   01A8 23            [ 6]  148 inc hl
   01A9 23            [ 6]  149 inc hl
   01AA 23            [ 6]  150 inc hl
   01AB 23            [ 6]  151 inc hl
                            152 
   01AC 36 00         [10]  153 ld (hl),#0x00
                            154 
   01AE 2B            [ 6]  155 dec hl
   01AF 2B            [ 6]  156 dec hl
   01B0 2B            [ 6]  157 dec hl
   01B1 2B            [ 6]  158 dec hl
                            159 
                            160 
                            161 
   01B2 C9            [10]  162 ret
